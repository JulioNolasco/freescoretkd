<!DOCTYPE html>
<html>
<head>
<meta charset='UTF-8' />
<!-- Ensure page sizes properly on mobile devices -->
<meta name='viewport' content='width=device-width' />

<!-- Styles -->
<link href='http://fonts.googleapis.com/css?family=Oxygen+Mono' rel='stylesheet' />
<link href='http://fonts.googleapis.com/css?family=Ubuntu:300,300italic,400' rel='stylesheet' />
<link href='../../resources/styles/css/site-global.css' rel='stylesheet' />
<link href='../../resources/styles/css/global.css' rel='stylesheet' />
<link href='../../resources/images/favicon.ico' rel='shortcut icon' />

<link href='../../resources/styles/css/docs.css' rel='stylesheet' />
<link href='../../resources/styles/css/syntax.css' rel='stylesheet' />

<!-- SEO Info -->
<meta name='description' content='Documentation for jCanvas, the jQuery HTML5 canvas plugin.' />

<title>Events | jCanvas Docs</title></head>
<body>

<!-- Main header & navigation -->
<div class='header box'>
	<ul class='nav'>
		<li class='logo'><a href='../../'>j<span class='c'>C</span>anvas</a></li>
		<li class='author'><a href='/'>by Caleb Evans</a></li>
		<li><a href='../../downloads/'>Downloads</a></li>
		<li><a href='../../docs/'>Docs</a></li>
		<li><a href='../../sandbox/'>Sandbox</a></li>
		<li><a href='../../support/'>Support</a></li>
	</ul>
</div>
<div class='content'>

<h1 class='drawer-toggle'>
	Documentation
	<span class='arrow'></span>	
</h1>
<div class='subtitle'>Click a code snippet to see a demo</div>

<div id='sections' class='box drawer'>

<input type='text' id='search' placeholder='Search' />

<h3>jCanvas</h3><ul>
			<li class='match' data-keywords='jcanvas introduction '>
				<a href='../../docs/introduction/'>Introduction</a>
			</li>
			<li class='match' data-keywords='jcanvas syntax '>
				<a href='../../docs/syntax/'>Syntax</a>
			</li>
			<li class='match' data-keywords='jcanvas object '>
				<a href='../../docs/object/'>Object</a>
			</li>
			<li class='match' data-keywords='jcanvas preferences defaults'>
				<a href='../../docs/preferences/'>Preferences</a>
			</li>
			<li class='match' data-keywords='jcanvas extending plugin'>
				<a href='../../docs/extending/'>Extending</a>
			</li>
			<li class='match' data-keywords='jcanvas properties '>
				<a href='../../docs/properties/'>Properties</a>
			</li>
			<li class='match' data-keywords='jcanvas methods '>
				<a href='../../docs/methods/'>Methods</a>
			</li></ul><h3>Canvas</h3><ul>
			<li class='match' data-keywords='canvas clearcanvas '>
				<a href='../../docs/clearCanvas/'>Clear Canvas</a>
			</li>
			<li class='match' data-keywords='canvas translatecanvas '>
				<a href='../../docs/translateCanvas/'>Translate Canvas</a>
			</li>
			<li class='match' data-keywords='canvas rotatecanvas '>
				<a href='../../docs/rotateCanvas/'>Rotate Canvas</a>
			</li>
			<li class='match' data-keywords='canvas scalecanvas '>
				<a href='../../docs/scaleCanvas/'>Scale Canvas</a>
			</li>
			<li class='match' data-keywords='canvas savecanvas '>
				<a href='../../docs/saveCanvas/'>Save Canvas</a>
			</li>
			<li class='match' data-keywords='canvas restorecanvas '>
				<a href='../../docs/restoreCanvas/'>Restore Canvas</a>
			</li>
			<li class='match' data-keywords='canvas pixelmanipulation set pixels'>
				<a href='../../docs/pixelManipulation/'>Pixel Manipulation</a>
			</li>
			<li class='match' data-keywords='canvas getcanvasimage data url base64'>
				<a href='../../docs/getCanvasImage/'>Get Canvas Image</a>
			</li>
			<li class='match' data-keywords='canvas drawmanually '>
				<a href='../../docs/drawManually/'>Draw Manually</a>
			</li>
			<li class='match' data-keywords='canvas detectpixelratio detectpixelratio density screen retina display'>
				<a href='../../docs/detectPixelRatio/'>Detect Pixel Ratio</a>
			</li></ul><h3>Drawings</h3><ul>
			<li class='match' data-keywords='drawings arcs drawarc circles'>
				<a href='../../docs/arcs/'>Arcs</a>
			</li>
			<li class='match' data-keywords='drawings ellipses drawellipse'>
				<a href='../../docs/ellipses/'>Ellipses</a>
			</li>
			<li class='match' data-keywords='drawings rectangles drawrect'>
				<a href='../../docs/rectangles/'>Rectangles</a>
			</li>
			<li class='match' data-keywords='drawings lines drawline paths'>
				<a href='../../docs/lines/'>Lines</a>
			</li>
			<li class='match' data-keywords='drawings curves drawquadratic drawbezier paths'>
				<a href='../../docs/curves/'>Curves</a>
			</li>
			<li class='match' data-keywords='drawings vectors drawvector vectors'>
				<a href='../../docs/vectors/'>Vectors</a>
			</li>
			<li class='match' data-keywords='drawings text drawtext'>
				<a href='../../docs/text/'>Text</a>
			</li>
			<li class='match' data-keywords='drawings images drawimage'>
				<a href='../../docs/images/'>Images</a>
			</li>
			<li class='match' data-keywords='drawings polygons drawpolygon'>
				<a href='../../docs/polygons/'>Polygons</a>
			</li>
			<li class='match' data-keywords='drawings masking clipping'>
				<a href='../../docs/masking/'>Masking</a>
			</li></ul><h3>Layers</h3><ul>
			<li class='match' data-keywords='layers layerapi layers api'>
				<a href='../../docs/layerAPI/'>Layer API</a>
			</li>
			<li class='match' data-keywords='layers addlayers addlayer'>
				<a href='../../docs/addLayers/'>Add Layers</a>
			</li>
			<li class='match' data-keywords='layers retrievelayers '>
				<a href='../../docs/retrieveLayers/'>Retrieve Layers</a>
			</li>
			<li class='match' data-keywords='layers drawlayers drawlayers'>
				<a href='../../docs/drawLayers/'>Draw Layers</a>
			</li>
			<li class='match' data-keywords='layers manipulatelayers '>
				<a href='../../docs/manipulateLayers/'>Manipulate Layers</a>
			</li>
			<li class='match' data-keywords='layers animatelayers animatelayer'>
				<a href='../../docs/animateLayers/'>Animate Layers</a>
			</li>
			<li class='match' data-keywords='layers events click drag and drop touch'>
				<a href='../../docs/events/'>Events</a>
			</li></ul><h3>Styles</h3><ul>
			<li class='match' data-keywords='styles colors names hexadecimal values rgb rgba'>
				<a href='../../docs/colors/'>Colors</a>
			</li>
			<li class='match' data-keywords='styles shadows blur'>
				<a href='../../docs/shadows/'>Shadows</a>
			</li>
			<li class='match' data-keywords='styles gradients linear radial'>
				<a href='../../docs/gradients/'>Gradients</a>
			</li>
			<li class='match' data-keywords='styles patterns repeating'>
				<a href='../../docs/patterns/'>Patterns</a>
			</li>
			<li class='match' data-keywords='styles functions '>
				<a href='../../docs/functions/'>Functions</a>
			</li></ul>
</div>

<div id='section'>

<h2>Events</h2>

<p>jCanvas supports mouse and touch events for most drawings. Events are used in conjunction with the <a href='../../docs/layerAPI/'>Layers API</a>.</p>

<h3>Binding Events</h3>

<p>Any number of jCanvas events can be bound to any jCanvas layer.</p>

<p>The event property's name is always the name of the event itself (<code>click</code>, <code>mousedown</code>, <em>etc.</em>). These properties should be defined in the object passed to the <code>addLayer()</code> method.</p>

<p>The value of this event property must be a function. This callback function also accepts one argument, which is the layer's object of properties, as used below. Additionally, the <code>this</code> keyword refers to the canvas DOM element.</p>

<h3>Mouse events</h3>

<p>When you click the star in the demo below, it will spin.</p>

<pre class="prettyprint lang-js demo">
// Click the star to make it spin
$("canvas").drawPolygon({
  layer: true,
  fillStyle: "#c33",
  x: 100, y: 100,
  radius: 50,
  sides: 5,
  projection: -0.5,
  click: function(layer) {
    // Spin star
    $(this).animateLayer(layer, {
      rotate: '+=144'
    });
  }
});
</pre>

<h3>Multiple layers with events</h3>

<p>This example utilizes multiple layers with events attached.</p>

<p>When calling the <code>animateLayer()</code> method, you should pass it the layer object to animate that particular layer. Failing to do so will animate the first layer by default.</p>

<pre class="prettyprint lang-js demo">
// Create five cascading stars
for (var i=0; i&lt;5; i+=1) {

  $("canvas").drawPolygon({
    layer: true,
    fillStyle: "#c33",
    x: 50+(i*60), y: 50+(i*60),
    radius: 30,
    sides: 5,
    projection: -0.5,
    click: function(layer) {
      // Click a star to spin it
      $(this).animateLayer(layer, {
        rotate: '+=144'
      });
    }
  });

}
</pre>

<h3>The <code>mouseover</code> and <code>mouseout</code> events</h3>

<p>The <code>mouseover</code> and <code>mouseout</code> can be used separately, or together.</p>

<pre class='prettyprint lang-js demo'>
// Hover over the triangle to rotate it
$("canvas").drawPolygon({
  layer: true,
  fillStyle: "#c33",
  strokeStyle: "#333",
  strokeWidth: 2,
  x: 180, y: 150,
  radius: 100,
  sides: 3,
  mouseover: function(layer) {
    $(this).animateLayer(layer, {
      rotate: "+=60"
    }, 500);
  },
  mouseout: function(layer) {
    $(this).animateLayer(layer, {
      rotate: "+=60"
    }, 500);
  },
});
</pre>

<h3>The <code>eventX</code> and <code>eventY</code> properties</h3>

<p>In the event callback, you have access to the layer's <code>eventX</code> and <code>eventY</code> properties. These are the coordinates of the mouse when the event fired.</p>

<p>In this example, the closer you hover to the circle's center, the more transparent it will become.</p>

<pre class='prettyprint lang-js demo'>
$("canvas").drawArc({
  layer: true,
  fillStyle: "#c33",
  x: 180, y: 200,
  radius: 100,
  mousemove: function(layer) {
    var dx, dy, dist;
    dx = layer.eventX - layer.x;
    dy = layer.eventY - layer.y;
    dist = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));
    layer.opacity = dist / layer.radius;
  }
});
</pre>

<h3>The <code>cursor</code> property</h3>

<p>In this example, the <code>cursor</code> property is used to display a pointer cursor when hovering over the layer.</p>

<pre class='prettyprint lang-js demo'>
// Create a clickable link
$("canvas").drawText({
  layer: true,
  fillStyle: "#9cf",
  strokeStyle: "#000",
  strokeWidth: 2,
  x: 180, y: 100,
  text: "Click here",
  fontFamily: "Trebuchet MS",
  fontSize: 64,
  // Show pointer cursor on hover
  cursor: "pointer",
  // Click link to open it
  click: function(layer) {
    window.open("http://www.google.com/");
  }
});
</pre>

<h3>Drag-and-drop</h3>

<p>Layers can also be made draggable using the <code>draggable</code> property.</p>

<p>Please note that only layers can be made draggable (that is, the <code>layer</code> property should be set to <code>true</code>).</p>

<pre class='prettyprint lang-js demo'>
$("canvas")
.drawArc({
  layer: true,
  draggable: true,
  fillStyle: "#36c",
  x: 150, y: 150,
  radius: 50
})
.drawRect({
  layer: true,
  draggable: true,
  fillStyle: "#6c1",
  x: 100, y: 100,
  width: 100, height: 100
});
</pre>

<p>By default, draggable shapes will <em>not</em> move to the front when dragged. To change this behavior, set the <code>bringToFront</code> property to <code>true</code>.</p>

<pre class='prettyprint lang-js demo'>
$("canvas")
.drawArc({
  layer: true,
  draggable: true,
  bringToFront: true,
  fillStyle: "#36c",
  x: 150, y: 150,
  radius: 50
})
.drawRect({
  layer: true,
  draggable: true,
  bringToFront: true,
  fillStyle: "#6c1",
  x: 100, y: 100,
  width: 100, height: 100
});
</pre>

<h4>Drag Events</h4>

<p>You can provide callbacks for when any drag event occurs by defining <code>dragstart</code>, <code>drag</code>, <code>dragstop</code>, and <code>dragcancel</code> callbacks.</p>

<ul>
	<li><dfn>dragstart</dfn>: Triggers when you start dragging a layer</li>
	<li><dfn>drag</dfn>: Triggers as you drag a layer</li>
	<li><dfn>dragstop</dfn>: Triggers when you stop dragging a layer</li>
	<li><dfn>dragcancel</dfn>: Triggers when you drag a layer off the edge of the canvas</li>
</ul>

<div class='column'>
<h3>Supported Methods</h3>
<ul>
	<li><code>drawRect()</code></li>
	<li><code>drawArc()</code></li>
	<li><code>drawEllipse()</code></li>
	<li><code>drawLine()</code></li>
	<li><code>drawQuadratic()</code></li>
	<li><code>drawBezier()</code></li>
	<li><code>drawVector()</code></li>
	<li><code>drawGraph()</code></li>
	<li><code>drawPolygon()</code></li>
	<li><code>drawImage()</code></li>
	<li><code>drawText()</code></li>
</ul>
</div>

<div class='column'>
<h3>Supported Events</h3>
<ul>
	<li><code>click</code></li>
	<li><code>dblclick</code></li>
	<li><code>mousedown</code></li>
	<li><code>mouseup</code></li>
	<li><code>mousemove</code></li>
	<li><code>mouseover</code></li>
	<li><code>mouseout</code></li>
	<li><code>dragstart</code></li>
	<li><code>drag</code></li>
	<li><code>dragstop</code></li>
	<li><code>touchstart</code></li>
	<li><code>touchend</code></li>
	<li><code>touchmove</code></li>
</ul>
</div>

<div class='clearfix'></div>

<h3>Draggable groups</h3>

<p>jCanvas allows you to assign a drag group to a layer. This means that when the layer is dragged, all other layers in the same layer <code>group</code> will also be dragged.</p>

<p>This draggable grouping is achieved when you add the <code>dragGroupWithLayer</code> property to any (typically all) layers in the same ayer group.</p>

<pre class='prettyprint lang-js demo'>
// Both layers will be dragged together
$("canvas")
.drawArc({
  layer: true,
  draggable: true,
  group: 'shapes',
  dragGroupWithLayer: true,
  fillStyle: "#36c",
  x: 150, y: 150,
  radius: 50
})
.drawRect({
  layer: true,
  draggable: true,
  group: 'shapes',
  dragGroupWithLayer: true,
  fillStyle: "#6c1",
  x: 100, y: 100,
  width: 100, height: 100
});
</pre>

<h3>Touch Events</h3>

<p>jCanvas also supports native touch events on iOS and Android using the <code>touchstart</code>, <code>touchend</code>, and <code>touchmove</code> events.</p>

<pre class='prettyprint lang-js demo'>
// This demo will only work on iOS and Android
$("canvas").drawRect({
  layer: true,
  fillStyle: "#36c",
  x: 150, y: 100,
  width: 120, height: 80,
  touchstart: function(layer) {
    // Animate layer when touched
    $(this).animateLayer(0, {
      fillStyle: "#c33",
      scale: 1.5
    });
  },
  touchend: function(layer) {
    // Revert layer when touch ends
    $(this).animateLayer(0, {
      fillStyle: "#36c",
      scale: 1
    });
  }
});
</pre>

<p>As a bonus, jCanvas will also convert existing <code>mousedown</code>, <code>mouseup</code>, and <code>mousemove</code> callbacks to their respective touch events on iOS and Android. In other words, jCanvas code that you've written for desktop browsers will be automatically optimized for mobile browsers on iOS and Android.</p>

<pre class='prettyprint lang-js demo'>
// This demo will work on iOS, Android, and desktop browsers
$("canvas").drawRect({
  layer: true,
  fillStyle: "#36c",
  x: 150, y: 100,
  width: 120, height: 80,
  mousedown: function(layer) {
    // Animate layer when moused on or touched
    $(this).animateLayer(0, {
      fillStyle: "#c33",
      scale: 1.5
    });
  },
  mouseup: function(layer) {
    // Animate layer when moused off or touch ends
    $(this).animateLayer(0, {
      fillStyle: "#36c",
      scale: 1
    });
  }
});
</pre>

<p>At this time, jCanvas does not support multi-touch.</p>

<h3 class='clearfix'>Notes</h3>

<p>Events only can be bound when creating a jCanvas layer, and cannot be bound to shapes drawn using regular jCanvas methods (<code>drawRect()</code>, <code>drawArc()</code>, etc.).</p>

<p>Events cannot be bound to function layers (created with the <code>draw()</code> method).</p>
</div>

<div class='clearfix'></div>

</div>

<script src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js'></script>
<script src='../../resources/scripts/global.min.js'></script>

<!-- Google AdSense -->
<script type="text/javascript"><!--
google_ad_client = "ca-pub-1901180034197863";
// Determine ad using media query
if (matchMedia('(max-width: 800px)').matches) {
	/* jCanvas (mobile) */
	google_ad_slot = "2390606865";
	google_ad_width = 320;
	google_ad_height = 50;
} else {
	/* jCanvas (vertical) */
	google_ad_slot = "9309404860";
	google_ad_width = 160;
	google_ad_height = 600;
}
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

<!-- Google Analytics -->
<script>

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32407194-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script><script src='../../resources/scripts/prettify.min.js'></script>
<script src='../../resources/scripts/docs.min.js'></script>
</body>
</html>